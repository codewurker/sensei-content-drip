!function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([,function(e,t){!function(e,t,s){ManualContentDrip=s.View.extend({el:".postbox.manual-content-drip",events:{"change #scd_select_learner":"setUserID","change #scd_select_course_lesson":"setLessonID"},initialize:function(){this.selectedUserID="",this.selectedLessonID="",this.manualDripState="",this.learnerSelect=this.$("#scd_select_learner"),this.lessonSelect=this.$("#scd_select_course_lesson"),this.button=this.$("#scd_log_learner_lesson_manual_drip_submit"),t.isUndefined(e.fn.select2)||(this.learnerSelect.select2(),this.lessonSelect.select2().hide()),this.listenTo(this,"lessonSelected",this.getManualDripStatus),this.render()},setUserID:function(e){return"change"!==e.type||"scd_select_learner"!==e.target.id||t.isEmpty(e.target.value)?this.selectedUserID="":this.selectedUserID=parseInt(e.target.value),this.render(),this},setLessonID:function(e){return"change"!==e.type||"scd_select_course_lesson"!==e.target.id||t.isEmpty(e.target.value)?this.selectedLessonID="":(this.selectedLessonID=parseInt(e.target.value),this.trigger("lessonSelected",this.selectedLessonID)),this.render(),this},getManualDripStatus:function(s){if(!t.isEmpty(s+"")){var n={action:"get_manual_drip_status",nonce:scdManualDrip.nonce,userId:this.selectedUserID,lessonId:s};this.$("img.loading").removeClass("hidden");var r=this;e.post(ajaxurl,n,(function(e){e.success?(scdManualDrip.nonce=e.data.newNonce,r.manualDripState=e.data.manualDripStatus):console.log(e.data.notice),r.render(),r.$("img.loading").addClass("hidden")}))}},render:function(){return this.lessonSelect.hide(),this.button.hide(),t.isEmpty(this.selectedUserID+"")||this.lessonSelect.show(),t.isUndefined(this.manualDripState)||t.isEmpty(this.selectedLessonID+"")||(this.manualDripState?(this.button.attr("value",scdManualDrip.removeAccessValue),this.button.html(scdManualDrip.removeAccessText),this.button.removeClass("button-primary"),this.button.addClass("button-secondary")):(this.button.attr("value",scdManualDrip.giveAccessValue),this.button.html(scdManualDrip.giveAccessText),this.button.removeClass("button-secondary"),this.button.addClass("button-primary")),this.button.show()),this}}),window.manualContentDrip=new ManualContentDrip}(jQuery,_,Backbone)}]);